<html>
    <head>
        <TITLE>Covid19</TITLE>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
    </head>
    <body>
        <canvas id="cases"></canvas>
    </body>
</html>    
<script>

dataUrl = "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv"

// todo: summarize Mainland China, US provinces

d3.csv(dataUrl).then(makeChart);

function makeChart(rawData)
{
    console.log(rawData);

    countries = ["Estonia", "Latvia", "Lithuania", "Italy", "Japan"]; // can hardcode


    let data = rawData.filter(function(x) {
        // too big numbers there; todo: maybe summarize
        return countries.includes(x["Country/Region"]);
    });

    var labels = data.map(function(d) {return d["Country/Region"]});
    var volume = data.map(function(d) {return d["3/10/20"]});

    console.log(labels);
    console.log(volume);

    var chart = new Chart('cases', {
        type: 'horizontalBar',
        data: {
            labels: labels,
            datasets: [
                {
                    data: volume
                }
            ]
        }
    });
}
</script>